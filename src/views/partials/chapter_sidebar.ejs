<div class="w-64 bg-white border-r border-slate-200 flex flex-col flex-shrink-0 z-10 shadow-[4px_0_24px_-12px_rgba(0,0,0,0.1)]">
    
    <div class="p-5 border-b border-slate-100 bg-slate-50/50">
        <div class="flex flex-col gap-1">
            <a href="/novel/<%= novel._id %>" class="text-xs text-slate-400 hover:text-indigo-600 transition flex items-center gap-1 mb-2">
                <span>â†</span> è¿”å›ä½œå“è¯¦æƒ…
            </a>
            <h2 class="font-bold text-slate-800 truncate" title="<%= chapter.title %>"><%= chapter.title %></h2>
            <div class="flex items-center gap-2 text-xs text-slate-500">
                <span class="bg-slate-200 px-1.5 rounded">#<%= chapter.order %></span>
                <span class="truncate"><%= novel.title %></span>
            </div>
        </div>
    </div>
    
    <nav class="flex-1 py-4 space-y-1 overflow-y-auto custom-scrollbar">
        <% const tabs = [
            { id: 'script', icon: 'ğŸ“', label: 'æç¤ºè¯ç”Ÿæˆ' },
            { id: 'setting', icon: 'ğŸ¨', label: 'è§†è§‰è®¾å®š' },
            { id: 'panels', icon: 'ğŸ¬', label: 'åˆ†é•œåˆ¶ä½œ', badge: chapter.script_data ? chapter.script_data.length : 0 },
            { id: 'split', icon: 'âœ‚ï¸', label: 'å›¾ç‰‡åˆ†å‰²' },
            { id: 'audio', icon: 'ğŸ—£ï¸', label: 'è¯­éŸ³å­—å¹•' },
            { id: 'video', icon: 'ğŸ¥', label: 'è§†é¢‘ç”Ÿæˆ' }
        ]; %>

        <% tabs.forEach(tab => { %>
            <a href="/chapter/<%= chapter._id %>/<%= tab.id %>" 
               class="block w-full text-left px-6 py-3 text-sm font-medium transition-all flex items-center justify-between border-l-4 group
               <%= activeTab === tab.id ? 'bg-indigo-50 text-indigo-700 border-indigo-600' : 'text-slate-600 hover:bg-slate-50 hover:text-slate-900 border-transparent' %>">
                <div class="flex items-center gap-3">
                    <span class="text-lg opacity-80 <%= activeTab === tab.id ? '' : 'grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all' %>"><%= tab.icon %></span>
                    <span><%= tab.label %></span>
                </div>
                <% if (tab.badge > 0) { %>
                    <span class="bg-indigo-100 text-indigo-600 text-xs px-2 py-0.5 rounded-full font-bold"><%= tab.badge %></span>
                <% } %>
            </a>
        <% }) %>
    </nav>
</div>